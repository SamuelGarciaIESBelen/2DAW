<!DOCTYPE html>
<html lang="en">
<head>
	<meta charset="UTF-8">
	<meta name="viewport" content="width=device-width, initial-scale=1.0">
	<title>GitHub User</title>
	<link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/css/bootstrap.min.css" rel="stylesheet"
		integrity="sha384-QWTKZyjpPEjISv5WaRU9OFeRpok6YctnYmDr5pNlyT2bRjXh0JMhjY6hW+ALEwIH" crossorigin="anonymous">
	<script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/js/bootstrap.bundle.min.js"
		integrity="sha384-YvpcrYf0tY3lHB60NNkmXc5s9fDVZLESaAA55NDzOxhy9GkcIdslK1eN7N6jIeHz"
		crossorigin="anonymous"></script>
</head>
<body class="p-5">
	<form>
		<h2>GitHub User</h2>
		<label for="user">Introduce un usuario de GitHub</label>
		<input class="form-control mt-2 mb-3 w-25" type="text" id="user">
		<button class="btn btn-primary" id="send">Enviar</button>
	</form>
	<div class="p-5 fs-5" id="res"></div>

	<script>
		document.querySelector("form").addEventListener("submit", (e) => {
			e.preventDefault();

			const user = document.querySelector("#user").value;
			if (!user) {
				alert("No puede estar vacÃ­o");
				location.reload();
			}
			const url = `https://api.github.com/users/${user}`;
			const res = document.querySelector("#res");

			async function displayUser() {
				await fetch(url)
				.then(response => {
					if (response.ok) {
						return response.json();
					} else {
						return response.json().then(res => {
							throw new Error(response.status + ": " + res.message);
						})
					}
				})
				.then(data => {
					console.log(data);

					let login = data.login
					let link = data.html_url
					let fechaCreacion = data.created_at;
					let repos = data.public_repos;
					let numSeguidores = data.followers;
					let listaSeguidores;
					
					let numSeguidos = data.following;
					let listaSeguidos;

					res.classList.remove("text-danger");
					res.innerHTML = `
					<p>Login: ${login} - Link: ${link}<p/>
					<p>Created at: ${fechaCreacion}<p/>
					<p>Repositories: ${repos}<p/>
					<p>Followers: ${numSeguidores}<p/>
					<p>Following: ${numSeguidos}<p/>
					`;					
				})
				.catch(error => {
					res.classList.add("text-danger");
					// res.innerHTML = "El usuario no existe";
					res.innerHTML = error;
				})
			}
			displayUser();
		})
	</script>
</body>
</html>